{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <h3>Manage Availability</h3>
  <p>Doctor: <strong>{{ doctor.firstName }} {{ doctor.lastName }}</strong></p>

  <form method="post" action="{{ url_for('doctor.add_availability') }}" class="row g-2">
    <input type="hidden" name="csrf_token" value="{{ session.get('csrf_token') }}" />
    <div class="col-md-3">
      <label class="form-label">Date</label>
      <input type="date" name="date" class="form-control" required />
    </div>
    <div class="col-md-3">
      <label class="form-label">Start</label>
      <input type="time" name="start_time" class="form-control" required />
    </div>
    <div class="col-md-3">
      <label class="form-label">End</label>
      <input type="time" name="end_time" class="form-control" required />
    </div>
    <div class="col-md-3 d-flex align-items-end">
      <button class="btn btn-primary">Add Availability</button>
    </div>
  </form>

  <hr />
  <h5>Existing Availability</h5>
  {% if availability %}
    <table class="table">
      <thead><tr><th>Date</th><th>Start</th><th>End</th><th>Actions</th></tr></thead>
      <tbody>
        {% for a in availability %}
          <tr>
            <td>{{ a.date }}</td>
            <td>{{ a.start_time }}</td>
            <td>{{ a.end_time }}</td>
            <td>
              <form method="post" action="{{ url_for('doctor.delete_availability', av_id=a.id) }}" style="display:inline-block">
                <input type="hidden" name="csrf_token" value="{{ session.get('csrf_token') }}" />
                <button class="btn btn-danger btn-sm">Remove</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No availability set.</p>
  {% endif %}
</div>
{% endblock %}
